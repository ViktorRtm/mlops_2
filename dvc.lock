schema: '2.0'
stages:
  clear_train:
    cmd: python3 scripts/clear_train.py data/train.csv
    deps:
    - path: data/train.csv
      hash: md5
      md5: 8fcda6dddf3201d2c12f2ab8f1c3ccdf
      size: 15281110
    - path: scripts/clear_train.py
      hash: md5
      md5: 9ff5a4b3ac9cff77db44c40846c221ee
      size: 684
    outs:
    - path: data/stage1
      hash: md5
      md5: b4115c5d113432bee6777cec80566b4b.dir
      size: 18131513
      nfiles: 1
  data_preparation:
    cmd: python3 scripts/data_preparation.py data/stage1/train.csv
    deps:
    - path: data/stage1/train.csv
      hash: md5
      md5: aa3be03110fc5780f866ed550dee48fd
      size: 18131513
    - path: scripts/data_preparation.py
      hash: md5
      md5: 07aece93ffe2d04497cbfde2fe4cc0d3
      size: 1803
    outs:
    - path: data/stage2
      hash: md5
      md5: 9c54de33b2db1bb284f2d906830f4b87.dir
      size: 24184704
      nfiles: 1
  split_on_x_y:
    cmd: python3 scripts/split_on_x_y.py data/stage2/train.csv
    deps:
    - path: data/stage2/train.csv
      hash: md5
      md5: 459a8c5d6b2e25397228bc60e045d7e2
      size: 24184704
    - path: scripts/split_on_x_y.py
      hash: md5
      md5: 2f6c2dc55ab575d2eca0d576f01fb315
      size: 978
    outs:
    - path: data/stage3
      hash: md5
      md5: 1eb7acfd0f7c371ebaf1fb0cf07c1dcd.dir
      size: 23495453
      nfiles: 2
  split:
    cmd: python3 scripts/data_split.py data/stage3/train_x.csv data/stage3/train_y.csv
    deps:
    - path: data/stage3/train_x.csv
      hash: md5
      md5: 3c22be81e95f8b7742df80e99354d6a3
      size: 16694554
    - path: data/stage3/train_y.csv
      hash: md5
      md5: a1314e4a5b2ed5186a4b8b16ede9b388
      size: 6800899
    - path: scripts/data_split.py
      hash: md5
      md5: a6df827ea35711d41998b7794c221af4
      size: 952
    params:
      params.yaml:
        split.split_ratio: 0.2
    outs:
    - path: data/stage4
      hash: md5
      md5: 88b03957554b2e343b0170b4197d94fc.dir
      size: 23490332
      nfiles: 4
  train:
    cmd: python3 scripts/model_learning.py data/stage4/train_x.csv data/stage4/train_y.csv
    deps:
    - path: data/stage4/train_y.csv
      hash: md5
      md5: a59c4836d672bebada34238bfcfb11d8
      size: 5443400
    - path: data/stage4/train_y.csv
      hash: md5
      md5: a59c4836d672bebada34238bfcfb11d8
      size: 5443400
    - path: scripts/model_learning.py
      hash: md5
      md5: 55c5cd8ec5804fcb4182c5ea464eebf6
      size: 3250
    params:
      params.yaml:
        train.learning_rate: 0.05
        train.max_depth: 1
    outs:
    - path: models/model.pickle
      hash: md5
      md5: b2823acaaee4a5164e0e43642353f08d
      size: 670242
  evaluate:
    cmd: python3 scripts/evaluate.py data/stage4/val_x.csv data/stage4/val_y.csv models/model.pickle
    deps:
    - path: data/stage4/val_x.csv
      hash: md5
      md5: 01b66e4ff6a6bdcfb88ce1630d03ab1d
      size: 3336329
    - path: data/stage4/val_y.csv
      hash: md5
      md5: 1b043c9ac68ab2f17082d1fd5a174ebd
      size: 1357620
    - path: models/model.pickle
      hash: md5
      md5: b2823acaaee4a5164e0e43642353f08d
      size: 670242
    - path: scripts/evaluate.py
      hash: md5
      md5: 3bcd958bf4ad17583ff98db218a8a44e
      size: 3006
    outs:
    - path: evaluate/score.json
      hash: md5
      md5: 7ffde3c4b11d6889973537510f94897f
      size: 28
